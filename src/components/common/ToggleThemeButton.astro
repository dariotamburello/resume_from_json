---
import Sun from "src/icons/sun.astro";
import Moon from "src/icons/moon.astro";
---

<button class="scale-90 hover:scale-110 transition-all" id="themeToggle">
  <span class="sr-only">Dark theme</span>
  <span
    class="icon light text-black dark:text-white hidden dark:block transition-all"
    ><Sun /></span
  >
  <span
    class="icon dark text-black dark:text-white block dark:hidden transition-all"
    ><Moon />
  </span>

  <script>
    const setToggleListener = () => {
      let toggleBtn = document.getElementById("themeToggle");
      const handleToggleClick = () => {
        const element = document.documentElement;
        element.classList.toggle("dark");

        const isDark = element.classList.contains("dark");
        localStorage.setItem("theme", isDark ? "dark" : "light");
      };

      toggleBtn?.addEventListener("click", handleToggleClick);
    };

    setToggleListener();

    document.addEventListener("astro:after-swap", setToggleListener);
  </script>
</button>
